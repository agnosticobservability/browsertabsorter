<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="popup.css" />
    <title>Tab Sorter</title>
  </head>
  <body>
    <header class="header">
      <div class="search-box">
        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <circle cx="11" cy="11" r="8"></circle>
          <line x1="21" y1="21" x2="16.65" y2="16.65"></line>
        </svg>
        <input id="tabSearch" type="text" placeholder="Search..." />
      </div>
      <button id="btnUndo" class="icon-btn" title="Undo Last Action">
        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M3 7v6h6"></path>
          <path d="M21 17a9 9 0 0 0-9-9 9 9 0 0 0-6 2.3L3 13"></path>
        </svg>
      </button>
      <button id="btnSaveState" class="icon-btn" title="Save Current State">
        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z"></path>
          <polyline points="17 21 17 13 7 13 7 21"></polyline>
          <polyline points="7 3 7 8 15 8"></polyline>
        </svg>
      </button>
      <button id="btnLoadState" class="icon-btn" title="Load Saved State">
        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M22 19a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h5l2 3h9a2 2 0 0 1 2 2z"></path>
        </svg>
      </button>
      <div style="width: 1px; height: 24px; background: var(--border-color); margin: 0 8px;"></div>
      <button id="btnTheme" class="icon-btn" title="Toggle Theme">
        <svg id="iconMoon" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
        </svg>
        <svg id="iconSun" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="display:none;">
            <circle cx="12" cy="12" r="5"></circle>
            <line x1="12" y1="1" x2="12" y2="3"></line>
            <line x1="12" y1="21" x2="12" y2="23"></line>
            <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
            <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
            <line x1="1" y1="12" x2="3" y2="12"></line>
            <line x1="21" y1="12" x2="23" y2="12"></line>
            <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
            <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
        </svg>
      </button>
      <button id="btnPin" class="icon-btn" title="Pin to window">
        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <line x1="12" y1="17" x2="12" y2="22"></line>
          <path d="M5 17h14v-1.76a2 2 0 0 0-1.11-1.79l-1.78-.9A2 2 0 0 1 15 10.76V6h1a2 2 0 0 0 0-4H8a2 2 0 0 0 0 4h1v4.76a2 2 0 0 1-1.11 1.79l-1.78.9A2 2 0 0 0 5 15.24Z"></path>
        </svg>
      </button>
      <a href="devtools.html" target="_blank" class="icon-btn" title="DevTools">
        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <polyline points="16 18 22 12 16 6"></polyline>
          <polyline points="8 6 2 12 8 18"></polyline>
        </svg>
      </a>
    </header>

    <div class="sort-section">
      <div class="sort-chips">
        <label class="chip">
          <input type="checkbox" id="sortPinned"> Pinned
        </label>
        <label class="chip">
          <input type="checkbox" id="sortRecency"> Recent
        </label>
        <label class="chip">
          <input type="checkbox" id="sortHierarchy"> Hierarchy
        </label>
        <label class="chip">
          <input type="checkbox" id="sortTitle"> Title
        </label>
        <label class="chip">
          <input type="checkbox" id="sortUrl"> URL
        </label>
        <label class="chip">
          <input type="checkbox" id="sortContext"> AI Context
        </label>
      </div>
      <div class="action-bar">
        <button id="btnSort" class="btn">Sort</button>
        <button id="btnGroup" class="btn">Group</button>
        <button id="btnUngroup" class="btn">Ungroup</button>
        <button id="btnMerge" class="btn">Merge</button>
      </div>
    </div>

    <div class="selection-bar">
        <label class="checkbox-label">
          <input type="checkbox" id="selectAll"> Select All
        </label>
    </div>

    <dialog id="loadStateDialog" style="border: 1px solid var(--border-color); border-radius: 8px; padding: 16px; min-width: 300px; background: var(--bg-color); color: var(--text-color);">
      <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 16px;">
        <h3>Saved States</h3>
        <button id="btnCloseLoadState" style="background: none; border: none; cursor: pointer; color: var(--text-color);">âœ•</button>
      </div>
      <ul id="savedStateList" style="list-style: none; padding: 0; margin: 0; max-height: 300px; overflow-y: auto;"></ul>
    </dialog>

    <main id="windows"></main>

    <footer class="footer">
      <span id="statTabs">0 Tabs</span>
      <span id="statGroups">0 Groups</span>
      <span id="statWindows">0 Windows</span>
    </footer>

    <div id="resizeHandle"></div>
    <script type="module" src="../dist/ui/popup.js"></script>
  </body>
</html>
